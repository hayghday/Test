<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ©· Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù†ÙˆØ«Ø©</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    [type="radio"]:checked + span {
      color: #ec4899; 
    }
  </style>
</head>
<body class="bg-gradient-to-b from-pink-100 to-blue-200 min-h-screen p-6">
  <form class="max-w-xl mx-auto bg-white p-8 rounded-3xl shadow-xl space-y-6">
    <h1 class="text-2xl font-bold text-pink-600 text-center mb-4">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ù†ÙˆØ«Ø© ğŸ’–</h1>

    <div>
      <label class="block font-bold text-pink-700 mb-2">Ø§Ø³Ù…Ùƒ Ø§Ù„Ø¬Ù…ÙŠÙ„ ğŸ’–</label>
      <input type="text" id="username" required class="w-full p-3 rounded-xl border border-pink-300 focus:ring-2 focus:ring-pink-200" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ø³Ù…Ùƒ" />
    </div>

    <div id="questions" class="space-y-4"></div>

    <button type="submit" class="bg-pink-500 hover:bg-pink-600 text-white py-3 px-6 rounded-full w-full shadow-lg transform hover:scale-105 transition">
      âœ¨ Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© âœ¨
    </button>
  </form>

  <script>
    const questions = [
      "ÙƒÙŠÙ ØªØªØ¹Ø§Ù…Ù„ÙŠÙ† Ù…Ø¹ Ø§Ù„Ù…ÙˆØ§Ù‚Ù Ø§Ù„Ø¹Ø§Ø·ÙÙŠØ©ØŸ|A:Ø£Ø¨ÙƒÙŠ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ£ØªØ£Ø«Ø± Ø¨Ø³Ø±Ø¹Ø©|B:Ø£Ø­Ø§ÙˆÙ„ Ø£Ù† Ø£ØªÙ…Ø§Ø³Ùƒ ÙˆØ£ÙÙƒØ± Ø¨Ø¹Ù‚Ù„Ø§Ù†ÙŠØ©|C:Ø£ØªØµØ±Ù Ø¨Ø­Ø²Ù… ÙˆØ£ØªØ¬Ø§Ù‡Ù„ Ù…Ø´Ø§Ø¹Ø±ÙŠ",
      "ÙƒÙ… Ù…Ø±Ø© ØªÙ‡ØªÙ…ÙŠÙ† Ø¨Ù…Ø¸Ù‡Ø±Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù…Ù†Ø²Ù„ØŸ|A:Ø¯Ø§Ø¦Ù…Ù‹Ø§ØŒ ÙŠØ¬Ø¨ Ø£Ù† Ø£Ø¨Ø¯Ùˆ Ø¨Ø£ÙØ¶Ù„ ØµÙˆØ±Ø©|B:Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ØŒ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©|C:Ù†Ø§Ø¯Ø±Ù‹Ø§ØŒ Ù„Ø§ Ø£Ù‡ØªÙ… ÙƒØ«ÙŠØ±Ù‹Ø§",
      "Ù…Ø§ Ù‡Ùˆ Ø£Ø³Ù„ÙˆØ¨Ùƒ ÙÙŠ Ø§Ù„Ù„Ø¨Ø³ØŸ|A:Ø£Ù†ÙŠÙ‚ ÙˆØ£Ù†Ø«ÙˆÙŠ (ÙØ³Ø§ØªÙŠÙ†ØŒ Ø£Ù„ÙˆØ§Ù† Ù†Ø§Ø¹Ù…Ø©)|B:Ø¹ØµØ±ÙŠ ÙˆÙ…Ø±ÙŠØ­ (Ø¬ÙŠÙ†Ø²ØŒ Ø¨Ù„ÙˆØ²Ø§Øª)|C:Ø¨Ø³ÙŠØ· Ø¬Ø¯Ù‹Ø§ Ø£Ùˆ Ø¹Ù…Ù„ÙŠ ÙÙ‚Ø·",
      "Ù‡Ù„ ØªØ­Ø¨ÙŠÙ† ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙƒÙŠØ§Ø¬ØŸ|A:Ù†Ø¹Ù…ØŒ ÙˆØ£Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨ØªÙ‡|B:ÙÙ‚Ø· Ù„Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª|C:Ù„Ø§ Ø£ÙØ¶Ù„Ù‡",
      "ÙƒÙŠÙ ØªØµÙÙŠÙ† ØµÙˆØªÙƒ ÙˆØ·Ø±ÙŠÙ‚Ø© Ø­Ø¯ÙŠØ«ÙƒØŸ|A:Ù†Ø§Ø¹Ù… ÙˆÙ‡Ø§Ø¯Ø¦|B:Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ…ØªÙˆØ§Ø²Ù†|C:Ù‚ÙˆÙŠ ÙˆØ³Ø±ÙŠØ¹",
      "Ù…Ø§ Ù…Ø¯Ù‰ Ø­Ø³Ø§Ø³ÙŠØªÙƒ ØªØ¬Ø§Ù‡ Ù…Ø´Ø§Ø¹Ø± Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ|A:Ø­Ø³Ø§Ø³Ø© Ø¬Ø¯Ù‹Ø§ ÙˆØ£ØªØ¹Ø§Ø·Ù Ø¨Ø³Ø±Ø¹Ø©|B:Ø£Ø­Ø§ÙˆÙ„ ÙÙ‡Ù…Ù‡Ù… Ù„ÙƒÙ† Ø£Ø¶Ø¹ Ø­Ø¯ÙˆØ¯Ù‹Ø§|C:Ù„Ø§ Ø£ØªØ£Ø«Ø± ÙƒØ«ÙŠØ±Ù‹Ø§",
      "Ù‡Ù„ ØªÙØ¶Ù„ÙŠÙ† Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠØ© Ù…Ø«Ù„ Ø§Ù„ØªØ²ÙŠÙŠÙ† Ø£Ùˆ Ø§Ù„Ø·Ø¨Ø® Ø£Ùˆ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø²Ù‡ÙˆØ±ØŸ|A:Ù†Ø¹Ù…ØŒ Ø£Ø­Ø¨Ù‡Ø§ Ø¬Ø¯Ù‹Ø§|B:Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ ÙÙ‚Ø·|C:Ù„Ø§ Ø£Ø±Ø§Ù‡Ø§ Ù…Ù…ØªØ¹Ø©",
      "ÙƒÙŠÙ ØªØµÙÙŠÙ† Ù…Ø´ÙŠØªÙƒ ÙˆØ·Ø±ÙŠÙ‚ØªÙƒ ÙÙŠ Ø§Ù„Ø¬Ù„ÙˆØ³ØŸ|A:Ø£Ù†Ø«ÙˆÙŠØ© ÙˆÙ…Ù‡Ø°Ø¨Ø©|B:Ø¹Ø§Ø¯ÙŠØ© ÙˆØ·Ø¨ÙŠØ¹ÙŠØ©|C:Ø¹Ù…Ù„ÙŠØ© ÙˆØºÙŠØ± Ù…Ù‡ØªÙ…Ø© Ø¨Ø§Ù„Ø´ÙƒÙ„",
      "Ù…Ø§ Ø´Ø¹ÙˆØ±Ùƒ ØªØ¬Ø§Ù‡ Ø§Ù„Ø¹Ø·ÙˆØ±ØŸ|A:Ø£Ø¹Ø´Ù‚ Ø§Ù„Ø¹Ø·ÙˆØ± Ø§Ù„Ù†Ø§Ø¹Ù…Ø© ÙˆØ§Ù„Ø£Ù†Ø«ÙˆÙŠØ©|B:Ø£Ø¶Ø¹ Ø§Ù„Ø¹Ø·Ø± ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©|C:Ù„Ø§ Ø£Ù‡ØªÙ… ÙƒØ«ÙŠØ±Ù‹Ø§",
      "Ù‡Ù„ ØªØ­Ø¨ÙŠÙ† Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ù‚ØµØµ Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø£Ùˆ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ø¹Ø§Ø·ÙÙŠØ©ØŸ|A:Ù†Ø¹Ù… Ø¬Ø¯Ù‹Ø§|B:Ø£Ø­ÙŠØ§Ù†Ù‹Ø§|C:Ù„Ø§ØŒ Ø£ÙØ¶Ù„ Ø§Ù„Ø£ÙƒØ´Ù† Ø£Ùˆ Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ÙŠØ§Øª"
    ];

    const container = document.getElementById("questions");
    questions.forEach((q, i) => {
      const [question, ...options] = q.split("|"); 
      const div = document.createElement("div");
      div.className = "mb-6 p-4 bg-blue-50 rounded-xl";
      div.innerHTML = `<p class='mb-2 font-semibold text-blue-800'>${i + 1}. ${question}</p>` +
        options.map(opt => {
          const [val, text] = opt.split(":"); 
          return `
          <label class='flex items-center mb-2 p-2 hover:bg-blue-100 rounded-lg cursor-pointer'>
            <input type='radio' name='q${i}' value='${val}' required class='mr-2'>
            <span>${text}</span>
          </label>`;
        }).join(""); 
      container.appendChild(div);
    });

    document.querySelector("form").addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("username").value.trim();
      const answers = document.querySelectorAll("input[type='radio']:checked");
      
      // Ø¬Ù…Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ø¹ Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
      const userAnswers = [];
      const questionElements = document.querySelectorAll("#questions div");
      
      questionElements.forEach((qDiv, index) => {
        const questionText = qDiv.querySelector("p").textContent.replace(`${index + 1}. `, "");
        const selectedAnswer = qDiv.querySelector("input[type='radio']:checked");
        if (selectedAnswer) {
          userAnswers.push({
            question: questionText,
            answer: selectedAnswer.nextElementSibling.textContent.trim()
          });
        }
      });

      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©
      let score = 0;
      answers.forEach(ans => {
        if (ans.value === "A") score += 3;
        else if (ans.value === "B") score += 2;
        else if (ans.value === "C") score += 1;
      });
      const max = answers.length * 3;
      let percent = Math.round(score / max * 100);

      if (name === "Ù„Ù€ÙˆÙ„Ù€Ùˆ") percent = 117;

      // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±
      fetch('/submit-result', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
          name, 
          score: percent, 
          testType: 'Ø§Ù„Ø£Ù†ÙˆØ«Ø©',
          answers: userAnswers 
        })
      }).catch(e => console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªÙŠØ¬Ø©:', e));

      window.location.href = `result.html?score=${percent}&name=${encodeURIComponent(name)}`;
    });
  </script>
</body>
</html>
